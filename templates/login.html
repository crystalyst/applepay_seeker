<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta property="og:title" content="ì‚¬ê³¼ì°¾ê¸°"/>
    <meta property="og:description" content="ë‚´ ì§€ì—­ ì• í”Œí˜ì´ ê°€ë§¹ì ì„ ì°¾ì•„ë³´ì„¸ìš”ğŸ"/>
    <meta property="og:image" content=""/>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

    <title>find applepay store</title>
    <style>
        @font-face {
            font-family: 'dunggeunmo';
            font-weight: 400;
            font-style: normal;
            src: url('//tistory4.daumcdn.net/tistory/214191/skin/images/NeoDunggeunmo.ttf') format('truetype');
        }

        body {
            font-family: 'dunggeunmo';
        }

        .wrapper {
            background-color: #cccccc;
            width: 100%;
            height: 100vh;
        }

        .header {
            position: relative;
            width: 100%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-bottom: 3px solid darkgray;
        }

        .title {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
        }

        .icon {
            display: block;
            width: 50px;
            height: 50px;
            line-height: 50px;
            text-align: center;
            border-left: 3px solid darkgray;
            border-top: 3px solid #eeeeee;
            border-bottom: 3px solid #333333;
            border-right: 3px solid #777777;
        }

        .sub_title > .icon {
            margin-right: 10px;
            float: left;
            width: 30px;
            height: 30px;
            line-height: 30px;
        }

        .content {
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .main_content {
            text-align: center;
        }

        .main_text {
            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
        }

        .btn_wrapper {
            margin-top: 20px;
            width: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .show_login_btn, .show_register_btn {
            margin-top: 20px;
            width: 100%;
        }

        .login_modal, .register_modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            margin-top: -300px;
            margin-left: -250px;
            max-width: 500px;
            width: 95%;
            height: 600px;
            padding: 20px;
            background-color: #cccccc;
            border-left: 3px solid darkgray;
            border-top: 3px solid #eeeeee;
            border-bottom: 3px solid #333333;
            border-right: 3px solid #777777;
        }

        .modal_header {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .modal_content {
            margin-top: 20px;
            width: 100%;
        }

        input {
            margin-bottom: 10px;
        }

        .validate_msg {
            display: none;
            color: red;
            font-size: 10px;
        }

        .check_msg {
            display: none;
            color: blue;
            font-size: 10px;
        }

        .login_btn, .register_btn {
            margin-top: 20px;
            width: 100%;
        }

        .close_btn {
            position: absolute;
            top: 10px;
            right: 10px;
        }
    </style>

    <script>
        const districtList = [
            'ê°•ë‚¨êµ¬', 'ê°•ë™êµ¬', 'ê°•ë¶êµ¬', 'ê°•ì„œêµ¬', 'ê´€ì•…êµ¬', 'ê´‘ì§„êµ¬', 'êµ¬ë¡œêµ¬', 'ê¸ˆì²œêµ¬',
            'ë…¸ì›êµ¬', 'ë„ë´‰êµ¬', 'ë™ëŒ€ë¬¸êµ¬', 'ë™ì‘êµ¬', 'ë§ˆí¬êµ¬', 'ì„œëŒ€ë¬¸êµ¬', 'ì„œì´ˆêµ¬', 'ì„±ë™êµ¬',
            'ì„±ë¶êµ¬', 'ì†¡íŒŒêµ¬', 'ì–‘ì²œêµ¬', 'ì˜ë“±í¬êµ¬', 'ìš©ì‚°êµ¬', 'ì€í‰êµ¬', 'ì¢…ë¡œêµ¬', 'ì¤‘êµ¬', 'ì¤‘ë‘êµ¬'
        ]

        function login() {
            $.ajax({
                type: 'POST',
                url: '/api/login',
                data: {
                    user_email: $('.login_email_input').val(),
                    user_pw: $('.login_password_input').val()
                },
                success: function(response) {
                    if (response['state'] > 200) {
                        alert(response['msg'])
                        window.location.href = '/login'
                        return
                    }
                    $.cookie('token', response['token'])
                    window.location.href = '/'
                }
            })
        }

        function register() {
            $.ajax({
                type: 'POST',
                url: '/api/register',
                data: {
                    user_email: $('.register_email_input').val(),
                    user_name: $('.register_nickname_input').val(),
                    user_pw: $('.register_password_input').val(),
                    user_address_district: $('option:selected').val()
                },
                success: function(response) {
                    alert(response['msg'])
                    window.location.href = '/login'
                }
            })
        }

        let isValidLoginEmail, isValidLoginPW = false
        function validateLoginEmail() {
            let regex = new RegExp('[a-z0-9]+@[a-z]+\.[a-z]{2,3}')
            if (regex.test($('.login_email_input').val())) {
                isValidLoginEmail = true
                $('.validate_msg.login.email').hide()
                return
            }

            isValidLoginEmail = false
            $('.validate_msg.login.email').show()
        }

        function validateLoginPassword() {
            let regex = new RegExp('^(?=.*[0-9])(?=.*[a-zA-z]).{8,}$')
            if (regex.test($('.login_password_input').val())) {
                isValidLoginPW = true
                $('.validate_msg.login.pw').hide()
                return
            }

            isValidLoginPW = false
            $('.validate_msg.login.pw').show()
        }

        function validateLogin() {
            let isValid
            isValidLoginEmail&&isValidLoginPW ? isValid = true : isValid = false
            $('.login_btn').attr('disabled', !isValid)
        }

        let isValidRegisterEmail, isValidNickName, isValidRegisterPW, isValidRegisterPWCheck = false
        function validateRegisterEmail() {
            let regex = new RegExp('[a-z0-9]+@[a-z]+\.[a-z]{2,3}')
            if (regex.test($('.register_email_input').val())) {
                $('.validate_msg.register.email').hide()
                $('.email_check_btn').attr('disabled', false)
                return
            }

            $('.validate_msg.register.email').show()
            $('.email_check_btn').attr('disabled', true)
        }

        function checkRegisterEmail() {
            $.ajax({
                type: 'GET',
                url: '/api/email/check',
                data: {
                    user_email: $('.register_email_input').val()
                },
                success: function(response) {
                    if(response['state'] > 200) {
                        alert(response['msg'])
                        isValidRegisterEmail = false
                        $('.check_msg.register.email').hide()
                        return
                    }

                    alert(response['msg'])
                    isValidRegisterEmail = true
                    $('.check_msg.register.email').show()
                }
            })
        }

        function validateRegisterNickname() {
            let nickname = $('.register_nickname_input').val()
            if(nickname.length > 0) {
                isValidNickName = true
                $('.validate_msg.register.nickname').hide()
                $('.nickname_check_btn').attr('disabled', false)
                return
            }

            isValidNickName = false
            $('.validate_msg.register.nickname').show()
            $('.nickname_check_btn').attr('disabled', true)
        }

        function checkRegisterNickname() {
            $.ajax({
                type: 'GET',
                url: '/api/name/check',
                data: {
                    user_name: $('.register_nickname_input').val()
                },
                success: function(response) {
                    if(response['state'] > 200) {
                        alert(response['msg'])
                        isValidNickName = false
                        $('.check_msg.register.nickname').hide()
                        return
                    }

                    alert(response['msg'])
                    isValidNickName = true
                    $('.check_msg.register.nickname').show()
                }
            })
        }

        function validateRegisterPassword() {
            let regex = new RegExp('^(?=.*[0-9])(?=.*[a-zA-z]).{8,}$')
            if (regex.test($('.register_password_input').val())) {
                isValidRegisterPW = true
                $('.validate_msg.register.pw').hide()
                return
            }

            isValidRegisterPW = false
            $('.validate_msg.register.pw').show()
        }

        function validateRegisterPasswordCheck() {
            let pw = $('.register_password_input').val()
            let pwcheck = $('.register_password_check_input').val()
            if(pw == pwcheck) {
                isValidRegisterPWCheck = true
                $('.validate_msg.register.pwcheck').hide()
                return
            }

            isValidRegisterPWCheck = false
            $('.validate_msg.register.pwcheck').show()
        }

        function validateRegister() {
            let isValid
            (isValidRegisterEmail && isValidNickName) && (isValidRegisterPW && isValidRegisterPWCheck) ? isValid = true : isValid = false
            if ($('option:selected').val()) {
                $('.validate_msg.register.district').hide()
                $('.register_btn').attr('disabled', !isValid)
                return
            }

            $('.validate_msg.register.district').show()
            $('.register_btn').attr('disabled', true)
        }

        function showLogin() {
            $('.login_modal').show()
            $('.login_email_input').focus()
        }

        function showRegister() {
            for(let i = 0; i < districtList.length; i++) {
                let temp_html = `
                    <option value="${districtList[i]}">${districtList[i]}</option>
                `
                $('#selectDistrict').append(temp_html)
            }
            $('.register_modal').show()
            $('.register_email_input').focus()
        }

        function hideLogin() {
            $('.login_email_input').val('')
            $('.login_password_input').val('')
            $('.login_modal').hide()
        }

        function hideRegister() {
            $('.register_email_input').val('')
            $('.register_nickname_input').val('')
            $('.register_password_input').val('')
            $('.register_password_check_input').val('')
            $('.register_modal').hide()
        }
    </script>
</head>
<body>
<div class="wrapper">
    <div class="header">
        <h3 class="title">
            <span style="margin-right: 10px;">ì‚¬ê³¼</span>
            <span class="icon">ğŸ</span>
            <span style="margin-left: 10px;">ì°¾ê¸°</span>
        </h3>
    </div>
    <div class="content">
        <div class="main_content">
            <p>ğŸš© ê°™ì´ ì°¾ì•„ë´ìš”</p>
            <div class="main_text">
                <p style="line-height: 80px; margin: 0 20px 0 0;">ìš°ë¦¬ ë™ë„¤</p>
                <img
                    src="https://cdn-icons-png.flaticon.com/512/5968/5968144.png"
                    style="width: 80px"
                />
                <p style="line-height: 80px; margin: 0 0 0 20px;">ê°€ë§¹ì !</p>
            </div>
            <div class="btn_wrapper">
                <button class="show_login_btn" onclick="showLogin()">ë¡œê·¸ì¸</button>
                <button class="show_register_btn" onclick="showRegister()">íšŒì›ê°€ì…</button>
            </div>
        </div>
        <div class="login_modal">
            <div class="modal_header">
                <span class="icon">ğŸ”‘</span>
                <div class="modal_title">ë¡œê·¸ì¸</div>
            </div>
            <div class="close_btn">
                <button onclick="hideLogin()" type="button" class="btn-close" aria-label="Close"></button>
            </div>
            <div class="modal_content">
                <div>
                    <p>ì•„ì´ë””</p>
                    <input onkeydown="validateLoginEmail()" onkeyup="validateLogin()" class="login_email_input" type="text" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."/>
                    <p class="validate_msg login email">ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ í˜•ì‹ì…ë‹ˆë‹¤.</p>
                </div>
                <div>
                    <p>ë¹„ë°€ë²ˆí˜¸</p>
                    <input onkeydown="validateLoginPassword()" onkeyup="validateLogin()" class="login_password_input" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."/>
                    <p class="validate_msg login pw">ë¹„ë°€ë²ˆí˜¸ëŠ” í•œê¸€, ì˜ë¬¸, ìˆ«ì í˜¼í•© 8ì ì´ìƒ ì…ë‹ˆë‹¤.</p>
                </div>
                <button disabled class="login_btn" onclick="login()">ë¡œê·¸ì¸</button>
            </div>
        </div>
        <div class="register_modal">
            <div class="modal_header">
                <span class="icon">ğŸ¤</span>
                <div class="modal_title">íšŒì› ê°€ì…</div>
            </div>
            <div class="close_btn">
                <button onclick="hideRegister()" type="button" class="btn-close" aria-label="Close"></button>
            </div>
            <div class="modal_content">
                <div>
                    <p>ì•„ì´ë””</p>
                    <input onkeydown="validateRegisterEmail()" onkeyup="validateRegister()" class="register_email_input" type="text" placeholder="ì´ë©”ì¼ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."/>
                    <button class="email_check_btn" disabled onclick="checkRegisterEmail()">ì¤‘ë³µ í™•ì¸</button>
                    <p class="validate_msg register email">ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì´ë©”ì¼ í˜•ì‹ì…ë‹ˆë‹¤.</p>
                    <p class="check_msg register email">ì‚¬ìš©ê°€ëŠ¥í•œ ì´ë©”ì¼ ì…ë‹ˆë‹¤.</p>
                </div>
                <div>
                    <p>ë‹‰ë„¤ì„</p>
                    <input onkeydown="validateRegisterNickname()" onkeyup="validateRegister()" class="register_nickname_input" type="text" placeholder="ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”."/>
                    <button class="nickname_check_btn" disabled onclick="checkRegisterNickname()">ì¤‘ë³µ í™•ì¸</button>
                    <p class="validate_msg register nickname">ë‹‰ë„¤ì„ì„ ê³µë°± ì—†ì´ 1ê¸€ì ì´ìƒ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
                    <p class="check_msg register nickname">ì‚¬ìš©ê°€ëŠ¥í•œ ë‹‰ë„¤ì„ ì…ë‹ˆë‹¤.</p>
                </div>
                <div>
                    <p>ë¹„ë°€ë²ˆí˜¸</p>
                    <input onkeydown="validateRegisterPassword()" onkeyup="validateRegister()" class="register_password_input" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."/>
                    <p class="validate_msg register pw">ë¹„ë°€ë²ˆí˜¸ëŠ” í•œê¸€, ì˜ë¬¸, íŠ¹ìˆ˜ë¬¸ì í˜¼í•© 4ì ì´ìƒ ì…ë‹ˆë‹¤.</p>
                </div>
                <div>
                    <p>ë¹„ë°€ë²ˆí˜¸ í™•ì¸</p>
                    <input onkeyup="validateRegisterPasswordCheck()" onchange="validateRegister()" class="register_password_check_input" type="password"
                           placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í•œ ë²ˆ ì…ë ¥í•´ì£¼ì„¸ìš”."/>
                    <p class="validate_msg register pwcheck">ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
                </div>
                <div class="input-group mb-3">
                    <label class="input-group-text" for="selectDistrict">ê´€ì‹¬ ì§€ì—­</label>
                    <select class="form-select" id="selectDistrict">
                        <option selected>ê´€ì‹¬ì§€ì—­ì„ ì„ íƒí•´ì£¼ì„¸ìš”</option>
                    </select>
                    <p class="validate_msg register district">ê´€ì‹¬ì§€ì—­ ì„ íƒì€ í•„ìˆ˜ì…ë‹ˆë‹¤.</p>
                </div>
                <button disabled class="register_btn" onclick="register()">íšŒì›ê°€ì…</button>
            </div>
        </div>
    </div>
</div>
</div>
</body>
</html>